[gd_scene load_steps=28 format=3 uid="uid://dp4n7bws1xtqu"]

[ext_resource type="Script" uid="uid://dspjy6hj0pupi" path="res://main.gd" id="1_272bh"]
[ext_resource type="PackedScene" uid="uid://ciolrmdh2mxkt" path="res://elements/controller/fps_controller.tscn" id="1_ig7tw"]
[ext_resource type="Script" uid="uid://b2ie1ji32skhx" path="res://scripts/astral_viewport.gd" id="2_0xm2m"]
[ext_resource type="Script" uid="uid://ij8wg4phpcn6" path="res://scripts/signal_bus.gd" id="2_ryguw"]
[ext_resource type="PackedScene" uid="uid://cllq0uwwcckq2" path="res://models/hospital_beds.glb" id="3_dg77c"]
[ext_resource type="Script" uid="uid://b2wbxl22ek0vq" path="res://scripts/player.gd" id="4_vivmo"]
[ext_resource type="Script" uid="uid://cr3afoq8poqwa" path="res://components/health_component.gd" id="5_w48qg"]
[ext_resource type="PackedScene" uid="uid://1n8moqe73gpg" path="res://scenes/scarecrow.tscn" id="6_7mycd"]
[ext_resource type="Script" uid="uid://d08x7vijxbycr" path="res://scripts/scarecrow.gd" id="6_272bh"]
[ext_resource type="PackedScene" uid="uid://coijfyox5m5lc" path="res://scenes/barrels.tscn" id="8_5vw27"]
[ext_resource type="Script" uid="uid://mc2a320q2neq" path="res://ui_manager.gd" id="8_82xsv"]
[ext_resource type="MeshLibrary" uid="uid://7cbhx0dktsd2" path="res://meshes/newmeshlib.tres" id="9_4c57u"]
[ext_resource type="Texture2D" uid="uid://ba4rln7b46ps1" path="res://textures/UI/white circle small.png" id="9_getpj"]
[ext_resource type="Script" uid="uid://b2f83eabx121f" path="res://scripts/barrels.gd" id="9_kek77"]
[ext_resource type="PackedScene" uid="uid://b3tlrnbv41w47" path="res://scenes/Door.tscn" id="10_4c57u"]
[ext_resource type="Script" uid="uid://c8py40rhmythr" path="res://scripts/eye_patch.gd" id="10_getpj"]
[ext_resource type="PackedScene" uid="uid://cgyrsfgx60lqe" path="res://scenes/inventory_dialog.tscn" id="11_d13ii"]
[ext_resource type="PackedScene" uid="uid://6fi2korl6fur" path="res://scenes/ring-new.tscn" id="11_efxa6"]
[ext_resource type="PackedScene" uid="uid://dw54qwn7m4t43" path="res://models/hospital_bed_1.glb" id="13_w48qg"]
[ext_resource type="VideoStream" uid="uid://basbrnirfchdm" path="res://vid/out.ogv" id="13_ycdy4"]
[ext_resource type="Texture2D" uid="uid://b5kv1wwhun4kg" path="res://textures/gorilla-statue-nodiffs.png" id="16_2cqfq"]
[ext_resource type="PackedScene" uid="uid://ddvagl21eutfi" path="res://scenes/ringu_amy.tscn" id="17_yaehf"]
[ext_resource type="PackedScene" uid="uid://c7owa6tcqy1bh" path="res://elements/pickup/pickup.tscn" id="18_074og"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_kek77"]
sky_horizon_color = Color(0.704285, 0.544938, 0.474513, 1)

[sub_resource type="Sky" id="Sky_kek77"]
sky_material = SubResource("ProceduralSkyMaterial_kek77")

[sub_resource type="Environment" id="Environment_lquwl"]
background_mode = 2
background_energy_multiplier = 0.2
sky = SubResource("Sky_kek77")
ambient_light_source = 3
ambient_light_color = Color(0.145218, 0.168094, 0.162729, 1)
ambient_light_sky_contribution = 0.1
ambient_light_energy = 11.13
reflected_light_source = 2
tonemap_mode = 2
ssao_enabled = true
ssao_intensity = 4.13
volumetric_fog_enabled = true

[sub_resource type="FontFile" id="FontFile_7mycd"]
cache/0/16/0/ascent = 0.0
cache/0/16/0/descent = 0.0
cache/0/16/0/underline_position = 0.0
cache/0/16/0/underline_thickness = 0.0
cache/0/16/0/scale = 1.0
cache/0/30/0/ascent = 0.0
cache/0/30/0/descent = 0.0
cache/0/30/0/underline_position = 0.0
cache/0/30/0/underline_thickness = 0.0
cache/0/30/0/scale = 1.0

[node name="world" type="Node3D"]
transform = Transform3D(0.999973, 0, 0.00733032, 0, 1, 0, -0.00733032, 0, 0.999973, 0, 0, 0)
script = ExtResource("1_272bh")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_lquwl")

[node name="sun" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.860458, 0.438499, 0.259482, -0.00634825, -0.5, 0.866002, 0.509482, -0.746806, -0.427445, 0, 13, 0)
light_color = Color(0.53, 0.53, 0.53, 1)
light_energy = 0.613
light_volumetric_fog_energy = 1.516

[node name="SignalBus" type="Node" parent="."]
script = ExtResource("2_ryguw")

[node name="Astral Viewport" type="SubViewportContainer" parent="." node_paths=PackedStringArray("astral_view", "entity")]
modulate = Color(1, 1, 1, 0.345098)
offset_right = 1151.0
offset_bottom = 648.0
stretch = true
script = ExtResource("2_0xm2m")
astral_view = NodePath("SubViewport/Astral View")
entity = NodePath("../Player/Controller")

[node name="SubViewport" type="SubViewport" parent="Astral Viewport"]
transparent_bg = true
handle_input_locally = false
size = Vector2i(1151, 648)
render_target_update_mode = 4

[node name="Astral View" type="Node3D" parent="Astral Viewport/SubViewport"]

[node name="Camera3D" type="Camera3D" parent="Astral Viewport/SubViewport/Astral View"]

[node name="Player" type="Node" parent="."]
script = ExtResource("4_vivmo")

[node name="Controller" parent="Player" node_paths=PackedStringArray("gridmap", "health_component") instance=ExtResource("1_ig7tw")]
unique_name_in_owner = true
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -4.0073, 1, -1.29455)
gridmap = NodePath("../../GridMap")
health_component = NodePath("../HealthComponent")

[node name="HealthComponent" type="Node" parent="Player"]
script = ExtResource("5_w48qg")
metadata/_custom_type_script = "uid://cr3afoq8poqwa"

[node name="GridMap" type="GridMap" parent="."]
mesh_library = ExtResource("9_4c57u")
cell_size = Vector3(3, 3, 3)
data = {
"cells": PackedInt32Array(0, 1, 3, 65535, 1, 3, 0, 0, 6, 65535, 0, 6, 65534, 65535, 1441793, 65534, 0, 6, 65533, 0, 3, 65534, 1, 3, 65534, 2, 655366, 0, 2, 655366, 0, 65535, 6, 1, 1, 655361, 1, 0, 7, 65533, 1, 3, 65532, 0, 1048582, 65531, 0, 4, 65531, 1, 1, 65535, 2, 655366, 65535, 3, 8, 65535, 65535, 6, 65535, 65534, 1, 65535, 65533, 6, 65535, 4, 8, 0, 3, 8, 0, 4, 8, 65534, 3, 5, 65533, 2, 655367, 65532, 2, 655366, 65531, 2, 1048578, 65532, 3, 8, 65535, 5, 8, 2, 65532, 589826, 1, 65532, 3, 0, 65532, 3, 1, 65530, 2, 1, 65531, 655366, 2, 65531, 655363, 65535, 65532, 1, 1, 65535, 7, 65534, 5, 8, 65533, 4, 8, 65532, 4, 8, 65531, 3, 8, 65533, 3, 8, 65532, 5, 8, 65532, 6, 8, 65533, 6, 8, 65534, 6, 8, 65533, 65535, 1441796, 65532, 65535, 1441796, 0, 65533, 1048582, 1, 65533, 655361, 65533, 5, 8, 65535, 65531, 4, 65535, 65530, 4, 2, 65530, 327681, 3, 65532, 851970, 3, 65530, 65538, 3, 65531, 65537, 0, 65530, 2, 0, 65531, 655367, 1, 65534, 6, 1, 2, 655362, 65531, 4, 655368, 65531, 5, 655368, 65531, 6, 655368, 65535, 6, 655368, 0, 6, 8, 0, 5, 655368, 65531, 65535, 2, 1, 3, 8, 1, 4, 8, 1, 5, 8, 1, 6, 8, 1, 7, 8, 0, 7, 8, 65535, 7, 8, 65534, 7, 8, 65533, 7, 8, 65532, 7, 8, 65531, 7, 8, 131068, 2, 655363, 131069, 2, 655363, 131070, 2, 655363, 131071, 2, 655363, 65536, 2, 655363, 65537, 2, 655363, 65537, 1, 655363, 65536, 1, 655363, 131071, 1, 655363, 131070, 1, 655363, 131069, 1, 655363, 131068, 1, 655363, 131067, 1, 655363, 131067, 0, 655363, 131068, 0, 655363, 131069, 0, 655363, 131070, 0, 655363, 131071, 0, 655363, 65536, 0, 655363, 65537, 65535, 655363, 65536, 65535, 655363, 131071, 65535, 655363, 131070, 65535, 655363, 131069, 65535, 655363, 131068, 65535, 655363, 131067, 65535, 655363, 131067, 2, 655363, 131071, 65534, 655363, 65536, 65534, 655363, 65537, 65534, 655363, 65537, 65533, 655363, 65536, 65533, 655363, 131071, 65533, 655363, 131071, 65532, 655363, 65536, 65532, 655363, 65537, 65532, 655363, 65538, 65532, 655363, 65539, 65532, 655363, 65539, 65531, 655363, 65538, 65531, 655363, 65537, 65531, 655363, 65536, 65531, 655363, 131071, 65531, 655363, 65536, 65530, 655363, 65537, 65530, 655363, 65538, 65530, 655363, 65539, 65530, 655363, 131067, 3, 655363, 131068, 3, 655363, 131069, 3, 655363, 131070, 3, 655363, 131071, 3, 655363, 131071, 4, 655363, 65536, 4, 655363, 65536, 3, 655363, 65537, 3, 655363, 65537, 4, 655363, 65537, 5, 655363, 65536, 5, 655363, 131070, 4, 655363, 131069, 4, 655363, 131068, 4, 655363, 131068, 5, 655363, 131067, 5, 655363, 131067, 4, 655363, 131069, 5, 655363, 131070, 5, 655363, 131071, 5, 655363, 65537, 6, 655363, 65537, 7, 655363, 65536, 7, 655363, 131071, 6, 655363, 65536, 6, 655363, 131071, 7, 655363, 131070, 7, 655363, 131070, 6, 655363, 131069, 6, 655363, 131069, 7, 655363, 131068, 6, 655363, 131068, 7, 655363, 131067, 7, 655363, 131067, 6, 655363, 65534, 4, 1048576, 65532, 1, 1048578, 65537, 0, 1048579, 65532, 8, 6, 65533, 8, 6, 65534, 8, 6, 65535, 8, 6, 0, 8, 6, 2, 6, 1048582, 2, 5, 1048582, 2, 4, 1048582, 2, 3, 1048582, 1, 8, 6, 2, 7, 1048582, 65531, 8, 6, 2, 65535, 1, 2, 65534, 1, 2, 0, 1, 2, 1, 1048582, 2, 2, 1048582, 0, 65534, 7, 65534, 65533, 1441798, 65530, 3, 1441798, 65530, 4, 1441798, 65530, 5, 1441798, 65530, 6, 1441798, 65530, 7, 1441798)
}
metadata/_editor_floor_ = Vector3(0, 0, 0)

[node name="UI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
script = ExtResource("8_82xsv")

[node name="CanvasLayer" type="CanvasLayer" parent="UI"]

[node name="InteractLabel" type="Label" parent="UI/CanvasLayer"]
unique_name_in_owner = true
visible = false
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -203.0
offset_top = -142.0
offset_right = 203.0
offset_bottom = -71.0
grow_horizontal = 2
grow_vertical = 0
size_flags_horizontal = 0
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_constants/outline_size = 5
theme_override_fonts/font = SubResource("FontFile_7mycd")
theme_override_font_sizes/font_size = 30
horizontal_alignment = 1

[node name="Cursor" type="TextureRect" parent="UI/CanvasLayer"]
unique_name_in_owner = true
offset_right = 40.0
offset_bottom = 40.0
mouse_filter = 2
texture = ExtResource("9_getpj")
stretch_mode = 2

[node name="EyesWideShut" type="ColorRect" parent="UI/CanvasLayer"]
visible = false
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.09, 0.000899999, 0.03357, 0.894118)
script = ExtResource("10_getpj")

[node name="InventoryDialog" parent="UI/CanvasLayer" instance=ExtResource("11_d13ii")]
unique_name_in_owner = true
visible = false
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -170.5
offset_top = -108.5
offset_right = 170.5
offset_bottom = 108.5

[node name="VideoStreamPlayer" type="VideoStreamPlayer" parent="."]
modulate = Color(1, 1, 1, 0.156863)
self_modulate = Color(0.635133, 0.2335, 0.107684, 1)
offset_left = -5.0
offset_top = -108.0
offset_right = 395.0
offset_bottom = 192.0
scale = Vector2(2.885, 2.885)
mouse_filter = 1
stream = ExtResource("13_ycdy4")
volume_db = -80.0
autoplay = true
loop = true

[node name="Gorilla" type="Sprite3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.197919, 1, -26.9993)
billboard = 1
texture = ExtResource("16_2cqfq")

[node name="Level" type="Node" parent="."]

[node name="ring" parent="Level" instance=ExtResource("11_efxa6")]
transform = Transform3D(0.999973, 0, 0.00733032, 0, 1, 0, -0.00733032, 0, 0.999973, -3.6628, 1.12198, 4)

[node name="Light" type="OmniLight3D" parent="Level/ring"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.037, 0)
light_color = Color(0.905279, 0.915045, 0.584185, 1)
light_energy = 2.181
light_indirect_energy = 5.376
light_volumetric_fog_energy = 0.549
light_size = 0.638
omni_range = 1.659
omni_attenuation = -1.374

[node name="Beds" type="Node3D" parent="Level"]
transform = Transform3D(0.999973, 0, 0.00733032, 0, 1, 0, -0.00733032, 0, 0.999973, 0, 0, 0)

[node name="hospital_beds" parent="Level/Beds" instance=ExtResource("3_dg77c")]
transform = Transform3D(-0.0146608, 0, -1.99995, 0, 2, 0, 1.99995, 0, -0.0146608, -12.5367, 0, 11.669)

[node name="hospital_beds2" parent="Level/Beds" instance=ExtResource("3_dg77c")]
transform = Transform3D(-0.0146608, 0, -1.99995, 0, 2, 0, 1.99995, 0, -0.0146608, -12.5733, 0, 16.6688)

[node name="hospital_beds3" parent="Level/Beds" instance=ExtResource("3_dg77c")]
transform = Transform3D(-0.0146608, 0, -1.99995, 0, 2, 0, 1.99995, 0, -0.0146608, -12.61, 0, 21.6687)

[node name="hospital_bed_1" parent="Level/Beds" instance=ExtResource("13_w48qg")]
transform = Transform3D(1.99995, 0, -0.0146606, 0, 2, 0, 0.0146606, 0, 1.99995, 4.39466, 0, 20.8357)

[node name="Door" parent="Level" instance=ExtResource("10_4c57u")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.42866, 1.30339, -12)

[node name="barrels" parent="Level" instance=ExtResource("8_5vw27")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.48267, 0.1, 7.49495)
script = ExtResource("9_kek77")

[node name="scarecrow" parent="Level" instance=ExtResource("6_7mycd")]
transform = Transform3D(0.999973, 0, 0.00733032, 0, 1, 0, -0.00733032, 0, 0.999973, -1.56577, 0.0542517, -7.54822)
script = ExtResource("6_272bh")

[node name="RinguAmy" parent="Level" node_paths=PackedStringArray("player") instance=ExtResource("17_yaehf")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.33692, 0, 22.7329)
player = NodePath("../../Player/Controller")
speed = 1.1

[node name="RinguAmy2" parent="Level" node_paths=PackedStringArray("player") instance=ExtResource("17_yaehf")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.33692, 0, 20.9431)
player = NodePath("../../Player/Controller")
speed = 1.2

[node name="RinguAmy3" parent="Level" node_paths=PackedStringArray("player") instance=ExtResource("17_yaehf")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8.09379, 0, 19.2801)
player = NodePath("../../Player/Controller")

[node name="Pickup" parent="Level" instance=ExtResource("18_074og")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.01165, 0.694466, -1.84675)

[node name="Pickup2" parent="Level" instance=ExtResource("18_074og")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.01165, 0.694466, -4.14551)

[node name="Pickup3" parent="Level" instance=ExtResource("18_074og")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.59169, 0.694466, 16.4447)

[node name="Pickup4" parent="Level" instance=ExtResource("18_074og")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.99152, 0.916982, 12.1531)

[connection signal="died" from="Player/HealthComponent" to="Player" method="_on_health_component_died"]
[connection signal="died" from="Player/HealthComponent" to="Player/Controller" method="_on_health_component_died"]
